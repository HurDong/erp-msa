server:
  port: 8082

spring:
  application:
    name: hr-service
  datasource:
    url: jdbc:postgresql://hr-db:5432/hr
    username: hr_user
    password: hr_pass
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  kafka:
    bootstrap-servers: kafka:9092

management:
  endpoints:
    web:
      exposure:
        include: health,info

app:
  jwt:
    secret: this_is_a_dev_only_secret_change_me

# 서비스 간 통신 설정
services:
  inventory:
    url: http://inventory-service:8083

# Resilience4j CircuitBreaker 설정
resilience4j:
  circuitbreaker:
    instances:
      inventoryClient:
        slidingWindowType: COUNT_BASED
        slidingWindowSize: 20
        failureRateThreshold: 50
        slowCallDurationThreshold: 1s
        slowCallRateThreshold: 50
        waitDurationInOpenState: 10s
        permittedNumberOfCallsInHalfOpenState: 3
        automaticTransitionFromOpenToHalfOpenEnabled: true
  timelimiter:
    instances:
      inventoryClient:
        timeoutDuration: 2s
  retry:
    instances:
      inventoryClient:
        maxAttempts: 3
        waitDuration: 200ms
        enableExponentialBackoff: true